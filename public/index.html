
<!DOCTYPE html><html lang="en"><head>
<meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1"/>
<link rel="icon" href="/favicon.ico" sizes="any"><link rel="icon" type="image/png" sizes="256x256" href="/favicon-256.png">
<title>DomeChat</title><link rel="stylesheet" href="styles.css"/></head><body>
<script>if(!localStorage.getItem('domechatTermsAccepted'))location.href='terms.html';</script>
<div id="topbar"><div class="brand"><div class="dot"></div><div class="logo">DOMECHAT</div></div></div>
<div class="page"><main class="center">
  <h1 class="logo" style="font-size:46px;letter-spacing:6px;margin:0">DOMECHAT</h1>
  <div style="opacity:.9">Connect to video chat with people by topic.</div>
  <div class="topic-wrap" style="margin-top:10px">
    <span class="icon">#</span>
    <input id="topic" class="topic-input" placeholder="Pick a topic (e.g., TikTok, Music, Sports)"/>
    <button id="startBtn" class="topic-go">Connect</button>
  </div>
  <div class="chips" id="trendingWrap" style="margin-top:8px"></div>
  <div class="row" style="display:flex;gap:12px;justify-content:center;margin-top:16px">
    <a class="ghost" href="/domephone.html" style="padding:10px 14px">Play Dome Phone</a>
  </div>
  <div class="follow-badge">follow domechat.live on TikTok</div>
</main></div>
<script>
async function loadTrending(){
  try{
    const res = await fetch('/trending',{cache:'no-store'});
    let data = await res.json();
    if(!data.some(x=>x.topic && x.topic.toLowerCase()==='tiktok')) data.unshift({topic:'TikTok',count:0});
    const wrap=document.getElementById('trendingWrap'); wrap.innerHTML='';
    data.slice(0,12).forEach(item=>{
      const t=item.topic||''; const chip=document.createElement('button'); chip.className='chip';
      chip.innerHTML=(t.toLowerCase()==='tiktok'?'<span class="hot">ðŸ”¥</span> ':'')+t+(item.count>0?` (${item.count})`:'');
      chip.onclick=()=>location.href='/chat.html?topic='+encodeURIComponent(t); wrap.appendChild(chip);
    });
  }catch(e){}
}
loadTrending(); setInterval(loadTrending,10000);
function go(){ const t=document.getElementById('topic').value.trim(); location.href='/chat.html'+(t?('?topic='+encodeURIComponent(t)):''); }
document.getElementById('startBtn').onclick=go; document.getElementById('topic').addEventListener('keypress',e=>{ if(e.key==='Enter') go(); });
</script>
</body></html>
