
<!DOCTYPE html><html lang="en"><head>
<meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>DomeChat</title><link rel="stylesheet" href="styles.css"/></head><body>
<script>if(!localStorage.getItem('domechatTermsAccepted'))location.href='terms.html';</script>
<div id="topbar">
  <div class="brand"><div class="dot"></div><div class="logo">DOMECHAT</div></div>
  <div class="controls">
    <button id="domePhoneBtn" class="ghost square">Dome Phone</button>
  </div>
</div>
<div class="page">
  <main class="center" style="padding-top:10vh">
    <h1 class="logo" style="font-size:46px;letter-spacing:6px">DOMECHAT</h1>
    <div id="trendingTitle" style="opacity:.9;margin-top:6px">Trending topics right now</div>
    <div id="trendingWrap" style="margin-top:10px"></div>
    <div style="margin-top:14px">Or enter your own:</div>
    <input id="topic" type="text" placeholder="Enter your topic" maxlength="60"/>
    <div style="display:flex;gap:10px;flex-wrap:wrap;justify-content:center;margin-top:8px">
      <button id="startBtn">Connect to Video Chat</button>
    </div>
    <div class="follow-badge">follow domechat.live on TikTok</div>
  </main>
</div>
<script>
async function loadTrending(){try{const res=await fetch('/trending',{cache:'no-store'});let data=await res.json();
if(!data.some(x=>x.topic.toLowerCase()==='tiktok'))data.unshift({topic:'TikTok',count:0});
const wrap=document.getElementById('trendingWrap');wrap.innerHTML='';data.slice(0,12).forEach(item=>{
const t=item.topic;const chip=document.createElement('button');chip.className='chip';
chip.innerHTML=(t.toLowerCase()==='tiktok'?'<span class="hot">ðŸ”¥</span>':'')+t+(item.count>0?` (${item.count})`:'');
chip.onclick=()=>location.href='/chat.html?topic='+encodeURIComponent(t);wrap.appendChild(chip);});}catch(e){}}
loadTrending();setInterval(loadTrending,10000);
const go=()=>{const t=document.getElementById('topic').value.trim();location.href='/chat.html'+(t?('?topic='+encodeURIComponent(t)):'')};
document.getElementById('startBtn').onclick=go;
document.getElementById('topic').addEventListener('keypress',e=>{if(e.key==='Enter')go();});
document.getElementById('domePhoneBtn').onclick=()=>location.href='/domephone.html';
</script></body></html>
